<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>Угадай слово по картинке (пиньинь)</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      background: #f9f9f9;
      margin: 0;
      padding: 20px;
    }
    img {
      max-width: 300px;
      max-height: 300px;
      margin: 20px auto;
      border: 2px solid #ccc;
      background: white;
    }
    .words {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
    }
    button {
      padding: 10px 20px;
      font-size: 20px;
      cursor: pointer;
      background-color: #e0e0e0;
      border: none;
      border-radius: 8px;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #b3d9ff;
    }
    button.wrong {
      background-color: #ff9999 !important;
    }
    #message {
      font-size: 24px;
      color: green;
      margin-top: 30px;
    }
    #timer {
      font-size: 20px;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

<h1>Угадай слово по картинке (пиньинь)</h1>
<div id="timer">Прошло времени: 0 сек</div>
<img id="picture" src="" alt="Картинка">
<div class="words" id="buttons"></div>
<div id="message"></div>

<script>
  const wordMap = {
    "个": "gè",
    "再见": "zàijiàn",
    "分钟": "fēnzhōng",
    "和": "hé",
    "回": "huí",
    "块": "kuài",
    "开": "kāi",
    "快": "kuài",
    "打电话": "dǎ diànhuà",
    "有": "yǒu",
    "没有": "méiyǒu",
    "累": "lèi",
    "菜": "cài",
    "读": "dú",
    "课": "kè",
    "进": "jìn",
    "零": "líng"
  };

  const words = Object.keys(wordMap);
  const usedWords = new Set();
  let currentWord = "";
  let startTime = Date.now();
  let timerInterval;

  function updateTimer() {
    const now = Date.now();
    const elapsedSeconds = Math.floor((now - startTime) / 1000);
    document.getElementById("timer").innerText = `Прошло времени: ${elapsedSeconds} сек`;
  }

  function pickRandomWord() {
    const remaining = words.filter(w => !usedWords.has(w));
    if (remaining.length === 0) {
      clearInterval(timerInterval);
      const totalTime = Math.floor((Date.now() - startTime) / 1000);
      document.getElementById("picture").style.display = "none";
      document.getElementById("buttons").innerHTML = "";
      document.getElementById("message").innerText = `Поздравляю! Ты угадал(а) все слова за ${totalTime} секунд!`;
      return;
    }
    const index = Math.floor(Math.random() * remaining.length);
    currentWord = remaining[index];
    document.getElementById("picture").src = `${currentWord}.png`;
  }

  function renderButtons() {
    const container = document.getElementById("buttons");
    container.innerHTML = "";
    words.forEach(word => {
      if (!usedWords.has(word)) {
        const btn = document.createElement("button");
        btn.innerText = wordMap[word];
        btn.onclick = () => {
          if (word === currentWord) {
            usedWords.add(word);
            pickRandomWord();
            renderButtons();
          } else {
            btn.classList.add("wrong");
            setTimeout(() => {
              btn.classList.remove("wrong");
            }, 500);
          }
        };
        container.appendChild(btn);
      }
    });
  }

  // старт
  pickRandomWord();
  renderButtons();
  timerInterval = setInterval(updateTimer, 1000);
</script>

</body>
</html>
